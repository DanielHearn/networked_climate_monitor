(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["register"],{"04de":function(t,e,s){"use strict";var r=s("aeaf"),a=s.n(r);a.a},"73cf":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main-panel",[s("template",{slot:"content"},[s("div",{staticClass:"content-column"},[s("h1",{staticClass:"title"},[t._v("Climate Monitor")]),s("h2",{staticClass:"heading"},[t._v("Account Registration")]),t.$store.state.user.email?[s("p",{staticClass:"text bold register-success"},[t._v(" The account has been successfully registered ")]),s("p",{staticClass:"text"},[t._v(" Complete the setup instructions to start using the climate monitor system. ")]),s("ol",{staticClass:"ordered-list"},[s("li",[s("p",{staticClass:"text"},[t._v(" Save the reset token below into a safe location such as in a text file or on paper. This token will be required to change or reset the account's password. ")]),s("span",{staticClass:"text bold"},[t._v("Reset token: "+t._s(t.$store.state.user.reset_token))])]),s("li",[s("p",{staticClass:"text"},[t._v(" Connect each sensor node to their battery. ")])]),s("li",[s("p",{staticClass:"text"},[t._v(" Plugin each sensor node's micro usb port to a USB port with a USB cable to charge the node's battery until the battery level on the dashboard is \"High\". ")])]),s("li",[s("p",{staticClass:"text"},[t._v(" Once the sensor nodes have been fully charged place the nodes in the areas that will be monitored. ")])]),s("li",[s("p",{staticClass:"text"},[t._v(" If the sensor nodes or climate data aren't appearing in the dashboard move the nodes closer to the base station so that they can communicate. ")])])]),s("router-link",{staticClass:"link",attrs:{to:"/dashboard"}},[t._v("Completed the setup? Click here to view the dashboard")])]:[s("p",{staticClass:"text"},[t._v(" Enter an email and password to register the account. ")]),s("register-form"),s("router-link",{staticClass:"link",attrs:{to:"/login"}},[t._v("Already registered? Click here to login")])]],2)])],2)},a=[],o=s("af63"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"form",attrs:{id:"register",method:"post"},on:{submit:t.checkRegister}},[s("div",{staticClass:"input-box"},[s("p",{staticClass:"text"},[t._v("Email")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"input--text",attrs:{type:"email",name:"email",placeholder:"Email",tabindex:"0",autocomplete:"email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),s("div",{staticClass:"input-box"},[s("p",{staticClass:"text"},[t._v("Password")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input--text",attrs:{type:"password",name:"password",placeholder:"Password",tabindex:"0",autocomplete:"new-password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),s("div",{staticClass:"input-box"},[s("p",{staticClass:"text"},[t._v("Confirm Password")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmPassword,expression:"confirmPassword"}],staticClass:"input--text",attrs:{type:"password",name:"confirmPassword",placeholder:"Confirm password",tabindex:"0",autocomplete:"new-password"},domProps:{value:t.confirmPassword},on:{input:function(e){e.target.composing||(t.confirmPassword=e.target.value)}}})]),t.errors.length?s("error-list",{attrs:{title:"Errors:",errors:t.errors}}):t._e(),s("v-button",{attrs:{hierachyLevel:"primary",text:"Register",type:"submit",tabindex:"0"}})],1)},n=[],c=(s("c975"),s("ac1f"),s("5319"),s("93da")),l=s("ecf6"),d=s("6d06"),u=s("66ca"),p=s("c860"),h={name:"register-form",components:{ErrorList:c["a"],vButton:p["a"]},data:function(){return{email:"",password:"",confirmPassword:"",errors:[]}},methods:{checkRegister:function(t){t.preventDefault(),this.errors=[];var e=this.email,s=this.password,r=this.confirmPassword,a=!0;""===e?(this.errors.push("Enter a email."),a=!1):-1===e.indexOf("@")&&(this.errors.push("Enter a valid email."),a=!1),""===s?(this.errors.push("Enter a password."),a=!1):(s.length<8||s.length>40)&&(this.errors.push("Password must be between 8 and 40 characters long."),a=!1),s!==r&&(this.errors.push("Password and confirm password be identical."),a=!1),a&&this.register(e,s)},register:function(t,e){var s=this;this.$toasted.show("Sending register request"),Object(l["l"])(t,e).then((function(e){var r=e.data;if(r.status&&r.access_token&&r.refresh_token){var a=s.$store.state.user;a.logged_in=!0,a.access_token=r.access_token,a.refresh_token=r.refresh_token,a.email=t,Object(u["c"])(r.access_token),Object(u["d"])(r.refresh_token),Object(l["d"])(r.access_token).then((function(t){var e=t.data;if(e.status&&e.account){var r=s.$store.state.user;r.settings=JSON.parse(e.account.settings.replace(/'/g,'"')),s.$store.commit("setUser",r)}})).catch((function(t){console.warn(t)})),s.$store.commit("setUser",a),s.$toasted.show("Registered")}})).catch((function(t){t.response&&t.response.data&&t.response.data.errors?s.errors=Object(d["d"])(t.response.data.errors):s.errors.push(t)}))}}},m=h,f=(s("04de"),s("2877")),v=Object(f["a"])(m,i,n,!1,null,null,null),g=v.exports,w={name:"register",components:{MainPanel:o["a"],RegisterForm:g}},_=w,b=Object(f["a"])(_,r,a,!1,null,null,null);e["default"]=b.exports},"7ac5":function(t,e,s){"use strict";var r=s("e56d"),a=s.n(r);a.a},"93da":function(t,e,s){"use strict";var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"error-list"},[t.title?s("p",{staticClass:"title"},[t._v(t._s(t.title))]):t._e(),s("ul",{staticClass:"errors"},t._l(t.errors,(function(e,r){return s("li",{key:r,staticClass:"error"},[s("p",[t._v(t._s(e))])])})),0)])},a=[],o={name:"error-list",props:{title:{type:String,default:"",required:!1},errors:{type:Array,default:[],required:!0}}},i=o,n=(s("7ac5"),s("2877")),c=Object(n["a"])(i,r,a,!1,null,null,null);e["a"]=c.exports},a640:function(t,e,s){"use strict";var r=s("d039");t.exports=function(t,e){var s=[][t];return!!s&&r((function(){s.call(null,e||function(){throw 1},1)}))}},aeaf:function(t,e,s){},c975:function(t,e,s){"use strict";var r=s("23e7"),a=s("4d64").indexOf,o=s("a640"),i=s("ae40"),n=[].indexOf,c=!!n&&1/[1].indexOf(1,-0)<0,l=o("indexOf"),d=i("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:c||!l||!d},{indexOf:function(t){return c?n.apply(this,arguments)||0:a(this,t,arguments.length>1?arguments[1]:void 0)}})},e56d:function(t,e,s){}}]);
//# sourceMappingURL=register.f4245d36.js.map